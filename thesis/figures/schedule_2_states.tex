\documentclass{standalone}
\usepackage{tikz}
\begin{document}
\begin{tikzpicture}
	\begin{axis}[%
	    xlabel=Time $t$,
	    ylabel=Active servers $x_t$,
	    axis x line = bottom,axis y line = left,
	    ytick={1,2,4,8,16},
	    xtick={0,1,2,3,4,5,6,7,8,9},
	    ymax=17, % or enlarge y limits=upper
	    xmax=9.9,
	    legend pos=outer north east
	    ]
	\addplot+[const plot, no marks, thick, color=red] coordinates {(0,0) (1,5) (2,4) (3,8) (4,7) (5,8) (6,15) (7,10) (8,16) (9,0) (9.5,0)};
	\addlegendentry{$x_t$};
	\addplot [only marks, mark=x, mark size=3, thick, color=blue] coordinates {(1,1) (3,8) (4,7) (5,8) (8,16) (9,7)};
	\addlegendentry{2-state changes};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(0,1) (9.5,1)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(0,2) (9.5,2)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(0,4) (2,4)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(3,4) (9.5,4)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(0,8) (3,8)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(4,8) (5,8)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(6,8) (9.5,8)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(0,16) (8,16)};
	\addplot+[const plot, no marks, thick, dashed, color=black] coordinates {(9,16) (9.5,16)};
	\end{axis}
\end{tikzpicture}
\end{document}
